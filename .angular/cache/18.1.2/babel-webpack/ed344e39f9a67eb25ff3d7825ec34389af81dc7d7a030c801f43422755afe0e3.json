{"ast":null,"code":"import * as L from 'leaflet';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"hidden\": a0\n});\nfunction AppComponent_div_8_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 11);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_8_li_2_Template_li_click_0_listener() {\n      const story_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.selectStory(story_r2));\n    });\n    i0.ɵɵelementStart(1, \"h3\", 12);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 13);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const story_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(story_r2.properties.country);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", story_r2.properties.region, \" - \", story_r2.properties.status, \"\");\n  }\n}\nfunction AppComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"ul\");\n    i0.ɵɵtemplate(2, AppComponent_div_8_li_2_Template, 5, 3, \"li\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.stories);\n  }\n}\nfunction AppComponent_div_9_div_19_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const achievement_r4 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(achievement_r4);\n  }\n}\nfunction AppComponent_div_9_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\", 17);\n    i0.ɵɵtext(2, \"Achievements:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 18);\n    i0.ɵɵtemplate(4, AppComponent_div_9_div_19_li_4_Template, 2, 1, \"li\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.selectedStory.properties.achievements);\n  }\n}\nfunction AppComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"h2\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\")(4, \"strong\");\n    i0.ɵɵtext(5, \"Region:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\")(8, \"strong\");\n    i0.ɵɵtext(9, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n    i0.ɵɵtext(13, \"Projects Disclosed:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\")(16, \"strong\");\n    i0.ɵɵtext(17, \"Disclosure Mandate:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, AppComponent_div_9_div_19_Template, 5, 1, \"div\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedStory.properties.country);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedStory.properties.region, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedStory.properties.status, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedStory.properties.projectsDisclosed, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedStory.properties.disclosureMandate || \"N/A\", \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedStory.properties.achievements.length > 0);\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(http) {\n      this.http = http;\n      this.title = 'globalSuccess';\n      this.stories = [];\n      this.showListView = false;\n      this.selectedStory = null;\n    }\n    ngOnInit() {\n      this.initMap();\n      this.loadStories();\n    }\n    initMap() {\n      this.map = L.map('map').setView([0, 0], 2);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '© OpenStreetMap contributors'\n      }).addTo(this.map);\n    }\n    loadStories() {\n      this.http.get('assets/data/stories.json').subscribe(data => {\n        this.stories = data.features;\n        this.addMarkers();\n      });\n    }\n    addMarkers() {\n      this.stories.forEach(story => {\n        const marker = L.marker([story.geometry.coordinates[1], story.geometry.coordinates[0]]).addTo(this.map).bindPopup(this.createPopupContent(story));\n        marker.on('click', () => {\n          this.selectedStory = story;\n        });\n        const icon = this.getMarkerIcon(story.properties.status);\n        marker.setIcon(icon);\n      });\n    }\n    getMarkerIcon(status) {\n      let color;\n      switch (status) {\n        case 'Active':\n          color = 'green';\n          break;\n        case 'Inactive':\n          color = 'red';\n          break;\n        case 'In Development':\n          color = 'orange';\n          break;\n        default:\n          color = 'blue';\n      }\n      return L.icon({\n        iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${color}.png`,\n        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n        iconSize: [25, 41],\n        iconAnchor: [12, 41],\n        popupAnchor: [1, -34],\n        shadowSize: [41, 41]\n      });\n    }\n    createPopupContent(story) {\n      return `\n      <div class=\"font-sans\">\n        <h3 class=\"font-bold text-lg\">${story.properties.country}</h3>\n        <p class=\"text-sm\"><strong>Region:</strong> ${story.properties.region}</p>\n        <p class=\"text-sm\"><strong>Status:</strong> ${story.properties.status}</p>\n        <p class=\"text-sm\"><strong>Projects Disclosed:</strong> ${story.properties.projectsDisclosed}</p>\n        <p class=\"text-sm\"><strong>Disclosure Mandate:</strong> ${story.properties.disclosureMandate || 'N/A'}</p>\n        ${story.properties.achievements.length > 0 ? `\n          <p class=\"text-sm mt-2\"><strong>Achievements:</strong></p>\n          <ul class=\"list-disc list-inside text-xs\">\n            ${story.properties.achievements.map(achievement => `<li>${achievement}</li>`).join('')}\n          </ul>\n        ` : ''}\n      </div>\n    `;\n    }\n    toggleListView() {\n      this.showListView = !this.showListView;\n    }\n    selectStory(story) {\n      this.selectedStory = story;\n      const [lng, lat] = story.geometry.coordinates;\n      this.map.setView([lat, lng], 6);\n    }\n    static #_ = this.ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      decls: 13,\n      vars: 6,\n      consts: [[1, \"flex\", \"flex-col\", \"h-screen\"], [1, \"bg-blue-600\", \"text-white\", \"p-4\", \"flex\", \"justify-between\", \"items-center\"], [1, \"text-2xl\", \"font-bold\"], [1, \"bg-white\", \"text-blue-600\", \"px-4\", \"py-2\", \"rounded\", 3, \"click\"], [1, \"flex-grow\", \"flex\"], [\"id\", \"map\", 1, \"w-full\", \"h-full\", 3, \"ngClass\"], [\"class\", \"w-full h-full overflow-y-auto bg-white p-4\", 4, \"ngIf\"], [\"class\", \"absolute bottom-0 left-0 right-0 bg-white p-4 shadow-lg\", \"style\", \"max-height: 50vh; overflow-y: auto;\", 4, \"ngIf\"], [1, \"bg-gray-200\", \"p-4\", \"text-center\", \"text-sm\"], [1, \"w-full\", \"h-full\", \"overflow-y-auto\", \"bg-white\", \"p-4\"], [\"class\", \"mb-4 cursor-pointer hover:bg-gray-100 p-2 rounded\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"mb-4\", \"cursor-pointer\", \"hover:bg-gray-100\", \"p-2\", \"rounded\", 3, \"click\"], [1, \"font-bold\"], [1, \"text-sm\"], [1, \"absolute\", \"bottom-0\", \"left-0\", \"right-0\", \"bg-white\", \"p-4\", \"shadow-lg\", 2, \"max-height\", \"50vh\", \"overflow-y\", \"auto\"], [1, \"text-xl\", \"font-bold\", \"mb-2\"], [4, \"ngIf\"], [1, \"font-bold\", \"mt-2\"], [1, \"list-disc\", \"list-inside\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"h1\", 2);\n          i0.ɵɵtext(3, \"Global Success Stories\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_4_listener() {\n            return ctx.toggleListView();\n          });\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"main\", 4);\n          i0.ɵɵelement(7, \"div\", 5);\n          i0.ɵɵtemplate(8, AppComponent_div_8_Template, 3, 1, \"div\", 6)(9, AppComponent_div_9_Template, 20, 6, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"footer\", 8)(11, \"p\");\n          i0.ɵɵtext(12, \"\\u00A9 2024 Global Success Stories. All rights reserved.\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", ctx.showListView ? \"Show Map\" : \"Show List\", \" \");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c0, ctx.showListView));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showListView);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedStory);\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf]\n    });\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}