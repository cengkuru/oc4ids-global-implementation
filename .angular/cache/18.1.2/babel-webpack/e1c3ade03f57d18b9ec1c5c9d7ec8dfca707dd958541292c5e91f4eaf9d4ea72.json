{"ast":null,"code":"import _asyncToGenerator from \"/Users/cengkurumichael/Documents/Documents - cengkuru\\u2019s MacBook Pro/Projects/globalSuceess/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as L from 'leaflet';\nimport { trigger, style, animate, transition } from '@angular/animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"hidden\": a0\n});\nfunction AppComponent_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const region_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", region_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(region_r1);\n  }\n}\nfunction AppComponent_option_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const status_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", status_r2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(status_r2);\n  }\n}\nfunction AppComponent_div_27_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 22);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_27_li_2_Template_li_click_0_listener() {\n      const story_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.selectStory(story_r4));\n    });\n    i0.ɵɵelementStart(1, \"h3\", 23);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 24);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const story_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(story_r4.properties.country);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", story_r4.properties.region, \" - \", story_r4.properties.status, \"\");\n  }\n}\nfunction AppComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"ul\");\n    i0.ɵɵtemplate(2, AppComponent_div_27_li_2_Template, 5, 3, \"li\", 21);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.filteredStories);\n  }\n}\nfunction AppComponent_div_28_div_19_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const achievement_r6 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(achievement_r6);\n  }\n}\nfunction AppComponent_div_28_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\", 28);\n    i0.ɵɵtext(2, \"Achievements:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 29);\n    i0.ɵɵtemplate(4, AppComponent_div_28_div_19_li_4_Template, 2, 1, \"li\", 30);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.selectedStory.properties.achievements);\n  }\n}\nfunction AppComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"h2\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\")(4, \"strong\");\n    i0.ɵɵtext(5, \"Region:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\")(8, \"strong\");\n    i0.ɵɵtext(9, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n    i0.ɵɵtext(13, \"Projects Disclosed:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\")(16, \"strong\");\n    i0.ɵɵtext(17, \"Disclosure Mandate:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, AppComponent_div_28_div_19_Template, 5, 1, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@slideInOut\", undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.selectedStory.properties.country);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.selectedStory.properties.region, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.selectedStory.properties.status, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.selectedStory.properties.projectsDisclosed, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.selectedStory.properties.disclosureMandate || \"N/A\", \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.selectedStory.properties.achievements.length > 0);\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(http, fb) {\n      this.http = http;\n      this.fb = fb;\n      this.title = 'globalSuccess';\n      this.stories = [];\n      this.filteredStories = [];\n      this.showListView = false;\n      this.selectedStory = null;\n      this.regions = [];\n      this.statuses = [];\n      this.filterForm = this.fb.group({\n        region: [''],\n        status: ['']\n      });\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.initMap();\n        _this.loadStories();\n      })();\n    }\n    initMap() {\n      return new Promise(resolve => {\n        this.map = L.map('map').setView([0, 0], 2);\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n          attribution: '© OpenStreetMap contributors'\n        }).addTo(this.map);\n        resolve();\n      });\n    }\n    loadStories() {\n      this.http.get('assets/data/stories.json').subscribe(data => {\n        this.stories = data.features;\n        this.filteredStories = this.stories;\n        this.extractFilters();\n        if (this.map) {\n          this.addMarkers();\n        } else {\n          console.error('Map not initialized when trying to add markers');\n        }\n      });\n    }\n    extractFilters() {\n      this.regions = [...new Set(this.stories.map(story => story.properties.region))];\n      this.statuses = [...new Set(this.stories.map(story => story.properties.status))];\n    }\n    addMarkers() {\n      if (!this.map) {\n        console.error('Map not initialized when trying to add markers');\n        return;\n      }\n      this.map.eachLayer(layer => {\n        if (layer instanceof L.Marker) {\n          this.map.removeLayer(layer);\n        }\n      });\n      this.filteredStories.forEach(story => {\n        if (!story.geometry || !Array.isArray(story.geometry.coordinates) || story.geometry.coordinates.length < 2) {\n          console.error('Invalid story geometry:', story);\n          return;\n        }\n        const marker = L.marker([story.geometry.coordinates[1], story.geometry.coordinates[0]], {\n          icon: this.getPulsingIcon(story.properties.status)\n        }).addTo(this.map).bindPopup(this.createPopupContent(story));\n        marker.on('click', () => {\n          this.selectedStory = story;\n        });\n      });\n    }\n    getPulsingIcon(status) {\n      const color = this.getColorForStatus(status);\n      return L.divIcon({\n        className: 'pulsing-icon',\n        html: `\n      <div class=\"pulse-ring\" style=\"border-color: ${color};\"></div>\n      <div class=\"pulse-core\" style=\"background-color: ${color};\"></div>\n    `,\n        iconSize: [20, 20],\n        iconAnchor: [10, 10]\n      });\n    }\n    getColorForStatus(status) {\n      switch (status) {\n        case 'Active':\n          return '#61a8bd';\n        // accent6\n        case 'Inactive':\n          return '#D60000';\n        // secondary\n        case 'In Development':\n          return '#ffce32';\n        // accent5\n        default:\n          return '#58707b';\n        // accent4\n      }\n    }\n    createPopupContent(story) {\n      return `\n      <div class=\"font-sans\">\n        <h3 class=\"font-bold text-lg\">${story.properties.country}</h3>\n        <p class=\"text-sm\"><strong>Region:</strong> ${story.properties.region}</p>\n        <p class=\"text-sm\"><strong>Status:</strong> ${story.properties.status}</p>\n        <p class=\"text-sm\"><strong>Projects Disclosed:</strong> ${story.properties.projectsDisclosed}</p>\n        <p class=\"text-sm\"><strong>Disclosure Mandate:</strong> ${story.properties.disclosureMandate || 'N/A'}</p>\n        ${story.properties.achievements.length > 0 ? `\n          <p class=\"text-sm mt-2\"><strong>Achievements:</strong></p>\n          <ul class=\"list-disc list-inside text-xs\">\n            ${story.properties.achievements.map(achievement => `<li>${achievement}</li>`).join('')}\n          </ul>\n        ` : ''}\n      </div>\n    `;\n    }\n    toggleListView() {\n      this.showListView = !this.showListView;\n    }\n    selectStory(story) {\n      this.selectedStory = story;\n      const [lng, lat] = story.geometry.coordinates;\n      this.map.setView([lat, lng], 6);\n    }\n    applyFilters() {\n      const {\n        region,\n        status\n      } = this.filterForm.value;\n      this.filteredStories = this.stories.filter(story => (!region || story.properties.region === region) && (!status || story.properties.status === status));\n      this.addMarkers();\n    }\n    static #_ = this.ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.FormBuilder));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      decls: 32,\n      vars: 9,\n      consts: [[1, \"flex\", \"flex-col\", \"h-screen\"], [1, \"bg-secondary\", \"text-primary\", \"p-4\", \"flex\", \"justify-between\", \"items-center\"], [1, \"text-2xl\", \"font-bold\"], [1, \"bg-primary\", \"text-secondary\", \"px-4\", \"py-2\", \"rounded\", \"hover:bg-primary-200\", \"transition-colors\", 3, \"click\"], [1, \"flex-grow\", \"flex\", \"flex-col\", \"md:flex-row\"], [1, \"w-full\", \"md:w-1/4\", \"p-4\", \"bg-primary-200\"], [1, \"space-y-4\", 3, \"ngSubmit\", \"formGroup\"], [\"for\", \"region\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-accent\"], [\"id\", \"region\", \"formControlName\", \"region\", 1, \"mt-1\", \"block\", \"w-full\", \"pl-3\", \"pr-10\", \"py-2\", \"text-base\", \"border-accent-100\", \"focus:outline-none\", \"focus:ring-secondary\", \"focus:border-secondary\", \"sm:text-sm\", \"rounded-md\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"status\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-accent\"], [\"id\", \"status\", \"formControlName\", \"status\", 1, \"mt-1\", \"block\", \"w-full\", \"pl-3\", \"pr-10\", \"py-2\", \"text-base\", \"border-accent-100\", \"focus:outline-none\", \"focus:ring-secondary\", \"focus:border-secondary\", \"sm:text-sm\", \"rounded-md\"], [\"type\", \"submit\", 1, \"w-full\", \"bg-secondary\", \"text-primary\", \"px-4\", \"py-2\", \"rounded\", \"hover:bg-secondary-300\", \"transition-colors\"], [1, \"w-full\", \"md:w-3/4\", \"h-full\", \"relative\"], [\"id\", \"map\", 1, \"w-full\", \"h-full\", 3, \"ngClass\"], [\"class\", \"w-full h-full overflow-y-auto bg-primary p-4\", 4, \"ngIf\"], [\"class\", \"absolute bottom-0 left-0 right-0 bg-primary p-4 shadow-apple-md\", \"style\", \"max-height: 50vh; overflow-y: auto;\", 4, \"ngIf\"], [1, \"bg-primary-400\", \"p-4\", \"text-center\", \"text-sm\"], [3, \"value\"], [1, \"w-full\", \"h-full\", \"overflow-y-auto\", \"bg-primary\", \"p-4\"], [\"class\", \"mb-4 cursor-pointer hover:bg-primary-200 p-2 rounded\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"mb-4\", \"cursor-pointer\", \"hover:bg-primary-200\", \"p-2\", \"rounded\", 3, \"click\"], [1, \"font-bold\"], [1, \"text-sm\"], [1, \"absolute\", \"bottom-0\", \"left-0\", \"right-0\", \"bg-primary\", \"p-4\", \"shadow-apple-md\", 2, \"max-height\", \"50vh\", \"overflow-y\", \"auto\"], [1, \"text-xl\", \"font-bold\", \"mb-2\"], [4, \"ngIf\"], [1, \"font-bold\", \"mt-2\"], [1, \"list-disc\", \"list-inside\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"h1\", 2);\n          i0.ɵɵtext(3, \"Global Disclosure Platforms\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_4_listener() {\n            return ctx.toggleListView();\n          });\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"main\", 4)(7, \"div\", 5)(8, \"form\", 6);\n          i0.ɵɵlistener(\"ngSubmit\", function AppComponent_Template_form_ngSubmit_8_listener() {\n            return ctx.applyFilters();\n          });\n          i0.ɵɵelementStart(9, \"div\")(10, \"label\", 7);\n          i0.ɵɵtext(11, \"Region\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"select\", 8)(13, \"option\", 9);\n          i0.ɵɵtext(14, \"All Regions\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(15, AppComponent_option_15_Template, 2, 2, \"option\", 10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\")(17, \"label\", 11);\n          i0.ɵɵtext(18, \"Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"select\", 12)(20, \"option\", 9);\n          i0.ɵɵtext(21, \"All Statuses\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(22, AppComponent_option_22_Template, 2, 2, \"option\", 10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(23, \"button\", 13);\n          i0.ɵɵtext(24, \" Apply Filters \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(25, \"div\", 14);\n          i0.ɵɵelement(26, \"div\", 15);\n          i0.ɵɵtemplate(27, AppComponent_div_27_Template, 3, 1, \"div\", 16)(28, AppComponent_div_28_Template, 20, 7, \"div\", 17);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(29, \"footer\", 18)(30, \"p\");\n          i0.ɵɵtext(31, \"\\u00A9 2024 Global Success Stories. All rights reserved.\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", ctx.showListView ? \"Show Map\" : \"Show List\", \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.filterForm);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.regions);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.statuses);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx.showListView));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showListView);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedStory);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n      styles: [\"[_nghost-%COMP%]{display:block;height:100vh}.pulsing-icon[_ngcontent-%COMP%]   .pulse-ring[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid;border-radius:50%;position:absolute;top:-5px;left:-5px;animation:_ngcontent-%COMP%_pulse 2s infinite}.pulsing-icon[_ngcontent-%COMP%]   .pulse-core[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;position:absolute;top:3px;left:3px}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.5);opacity:0}50%{opacity:1}to{transform:scale(1.5);opacity:0}}.pulsing-icon[_ngcontent-%COMP%]{position:relative}.pulse-ring[_ngcontent-%COMP%]{position:absolute;width:20px;height:20px;border-radius:50%;border:3px solid;animation:_ngcontent-%COMP%_pulse 2s infinite}.pulse-core[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;border-radius:50%;top:5px;left:5px}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.5);opacity:1}to{transform:scale(1.5);opacity:0}}\"],\n      data: {\n        animation: [trigger('slideInOut', [transition(':enter', [style({\n          transform: 'translateY(100%)'\n        }), animate('300ms ease-out', style({\n          transform: 'translateY(0%)'\n        }))]), transition(':leave', [animate('300ms ease-in', style({\n          transform: 'translateY(100%)'\n        }))])])]\n      }\n    });\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}